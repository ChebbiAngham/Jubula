<?xml version="1.0" encoding="UTF-8"?>
<!--
    Copyright (c) 2004, 2010 BREDEX GmbH.
    All rights reserved. This program and the accompanying materials
    are made available under the terms of the Eclipse Public License v1.0
    which accompanies this distribution, and is available at
    http://www.eclipse.org/legal/epl-v10.html
 -->

<project name="org.eclipse.jubula.releng" default="help" basedir=".">

	<!-- Whether to compile with debug informations or not. 
		Set to "on" only for testing purposes,  
		when building an official release it must be set to "off"!  -->
	<property name="javacDebugInfo" value="off" />

	<!-- Involved Projects -->
	<property name="j.feature"           value="org.eclipse.jubula.feature" />
	<property name="j.feature.client"    value="org.eclipse.jubula.feature.client" />
	<property name="j.feature.cmd"       value="org.eclipse.jubula.feature.cmd" />
	<property name="j.feature.dbtool"    value="org.eclipse.jubula.feature.dbtool" />

	<!-- Involved Builds -->
	<property name="j.b.feature"           value="feature" />
	<property name="j.b.feature.client"    value="${j.b.feature}/client" />

	<!-- Working Directory -->
	<property name="workingDir"            value="release" />

	<!-- Target Definitions -->
	<target name="help">
		<antcall target="checkEnvironment" />
	</target>

	<target name="checkEnvironment">
		<fail unless="relengBaseBuilderDir" 
			message="relengBaseBuilderDir property not set" />
		<echo message="Using 'relengBaseBuilderDir': ${relengBaseBuilderDir}" />
		<fail unless="relengCommonBuilderDir" 
			message="relengCommonBuilderDir property not set" />
		<echo message="Using 'relengCommonBuilderDir': ${relengCommonBuilderDir}" />
		<fail unless="writableBuildRoot" 
			message="writableBuildRoot property not set" />
		<echo message="Using 'writableBuildRoot': ${writableBuildRoot}" />
	</target>

	<target name="release.j.feature.client">
		<ant dir="${j.b.feature.client}" 
			 antfile="buildFeature.xml" 
			 target="build" 
		     inheritAll="false">
			<property name="javacDebugInfo" value="${javac.debug}" />
		</ant>
	</target>

	<target name="release.j.feature.cmd" />
	<target name="release.j.feature.dbtool" />

	<target name="release.j.feature" depends="release.j.feature.client, release.j.feature.cmd, release.j.feature.dbtool" />

	<target name="release.j" depends="checkEnvironment, release.j.feature">

	</target>

</project>