\index{Functions}
\index{Parameter!Function}

You can let \app{} calculate specific values for you without having to enter the results yourself by using \bxname{functions}. There are specific functions that work out-of-the-box with \app{}, and additional functions can be added as well. 

\subsubsection{Syntax for functions}
\index{Functions!Syntax}
The sign used to introduce a function is the question mark: \bxshell{?} (without quotes). 

After the sign, you must enter the name of the function followed by the arguments the function requires, e.g.:

\verb+?add(arg1,arg2)+

The arguments are separated by commas and are placed within round brackets. 

\subsubsection{Pre-defined functions}
The following functions are available directly in \app{}:

\textbf{Mathematical functions}\\
The following functions give their results as decimal numbers, e.g. 1.0, 1.2 etc. 
\begin{description}
\item [add]{Adds 0 or more numbers to 0, e.g.: \bxshell{?add(1,2)}.}
\item [sub]{Subtracts the second number from the first: \bxshell{?sub(3,2)}. \\This function only accepts two numbers.}
\item [mult]{Multiplies 0 or more numbers by 1 e.g.: \bxshell{?mult(2,4)}.}
\item [div]{Divides the first number by the second: \bxshell{?div(2,1)}. \\This function only accepts two numbers.}
\item [trunc]{Takes two arguments, the decimal to be truncated and the precision (as an integer) to truncate the decimal to. Use \bxshell{0} to cut off the number to no decimal places (i.e. to receive a plain integer), and use \bxshell{1} to cut off the decimal to one decimal place etc: \bxshell{?trunc(2.396,0)} gives \bxshell{2} and \bxshell{?trunc(2.789,1) gives \bxshell{2.7}}.}
\item [round]{Takes two arguments, the decimal to be rounded and the precision (as an integer) to round to. This function uses \bxname{half-up} rounding to round the number so that if the final decimal place after rounding is 5 or higher, the final number will be incremented by 1 e.g.: \bxshell{?round(2.56,1)} gives \bxshell{2.6}. If the final number after rounding is 4 or less, there is no incrementation, eg. \bxshell{?round(2.46,1)} gives \bxshell{2.4}. }
\bxwarn{It is currently only possible to use numbers formatted with the decimal mark \bxname{period} or \bxname{fullstop} (\bxshell{.}). Thousands separators may not be used. For example, \bxshell{1.5} is accepted, but \bxshell{1,5} is not. \bxshell{1000} can be entered but \bxshell{1,000} cannot. Entering \bxshell{1.000} is equivalent to entering \bxshell{1}.}
\end{description}
\bxtipp{Use single quotes around negative numbers, e.g. '-0.5'.}

\textbf{Date functions}\\
\begin{description}
\item [now]{Saves the current date in an internal format that can be used as a basis for the formatDate and modifyDate functions. This function takes no arguments: \bxshell{?now()}.}
\item [formatDate]{Puts a date into a specific format. The date to be formatted is entered as the first argument, followed by the format string e.g. \bxshell{?formatDate(?now(), dd-MM-yyyy)}. The formats that can used here are the formats from the SimpleDateFormat class in Java.}
\item [parseDate]{Reads a value that is a date and parses it into an internal format based on the format string given (i.e. how the date should be understood by \app{}). The first argument is the date, and the second is the format string  \bxshell{?parseDate(2011.06.25,yyyy.MM.dd)}. This function should be used when reading and working with dates shown in the \gdaut{}. }
\item [modifyDate]{This function can add days (d), months (M), and years (y) to a given date. The date must first be parsed (i.e. using parseDate) so that the correct internal format is used. This function takes two arguments: the first is the date to modify, and the second is the modification to perform, e.g. \bxshell{?modifyDate(?now(),1d)}. Additions are entered as positive integers (but without a plus sign, e.g. 1d, 1M, 1y) and subtractions are entered as negative integers, e.g. -1d, -1M, -1y.}
\end{description}

\bxtipp{If you want to use the result of a date function as a part of your test data (i.e. to enter or check), then you will most likely need to use formatDate on any date modifications you have performed.}
\subsubsection{Embedding functions in other functions}
Functions can be added as arguments to other functions. If, for example, you want to use the result of a subtraction as the first argument of your addition, you could write it like this:\\
\bxshell{?add(?sub(2,1),1)}\\
Results in \bxshell{1.0 + 1}, i.e. \bxshell{1.0}\\

\subsubsection{Useful examples for functions}
Especially when it comes to the date functions, it is often necessary to use multiple functions embedded within each other. 
\begin{description}
\item [?formatDate(?now(), dd' MMMM 'yyyy)]{e.g. 29 February 2012}
\item [?formatDate(?now(), dd' MMM 'yyyy)]{e.g. 29 Feb 2012}
\item [?formatDate(?now(), dd-MMM-yyyy)]{e.g. 29-Feb-2012}
\item [?formatDate(?now(), dd.MM.yyyy)]{e.g. 29.02.2012}
\item [?formatDate(?now(), dd/MM/yyyy)]{e.g. 29/02/2012}
\end{description}
A more complex example involving embedded functions is e.g.:

\begin{quote}
\textbf{?formatDate(?modifyDate(?parseDate\\(22.2.2012, dd.MM.yyyy),-1d),dd.MM.yy)}\\
This function will parse the date 22.2.2012 into an internal format, subtract one day and then format it as a dd.MM.yy, in this case: 21.2.12.
\end{quote}
\subsubsection{Adding your own functions}
You can also add your own functions using an extension point. This is described in the Extension Manual. 




